{
  "name": "PlexAdmin (.NET 9 + SQL Server)",
  "dockerComposeFile": "docker-compose.yml",
  "service": "app",
  "workspaceFolder": "/workspaces/PlexAdmin",
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {},
    "ghcr.io/jlaundry/devcontainer-features/mssql-odbc-driver:1": {},
    "ghcr.io/nikiforovall/devcontainer-features/dotnet-csharpier:1": {},
    		"ghcr.io/devcontainers/features/node:1": {
			"version": "lts"
		}
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-dotnettools.csharp",
        "ms-dotnettools.csdevkit",
        "ms-dotnettools.blazor-webassembly-debugger",
        "ms-mssql.mssql",
        "ms-vscode.vscode-json",
        "bradlc.vscode-tailwindcss",
        "formulahendry.auto-rename-tag",
        "ms-vscode.powershell",
				"anthropic.claude-code"
      ],
      "settings": {
        "dotnet.server.useOmnisharp": false,
        "dotnet.completion.showCompletionItemsFromUnimportedNamespaces": true
      }
    }
  },
  	// Forward the WSL2 ssh-agent socket into the container:
	"mounts": [
		"source=${localEnv:HOME}/.ssh/agent.sock,target=/ssh-agent,type=bind"
	],
	"containerEnv": {
		"SSH_AUTH_SOCK": "/ssh-agent",
		// Accept GitHub's host key on first connect (modern OpenSSH hashes known_hosts):
		"GIT_SSH_COMMAND": "ssh -o StrictHostKeyChecking=accept-new"
	},
	"remoteEnv": {
		"SSH_AUTH_SOCK": "/ssh-agent"
	},
  "forwardPorts": [5000, 5001, 1433],
  "portsAttributes": {
    "5000": {
      "label": "HTTP",
      "protocol": "http"
    },
    "5001": {
      "label": "HTTPS",
      "protocol": "https"
    }
  },

  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "postStartCommand": "bash .devcontainer/post-start.sh",

  "remoteUser": "vscode"
}